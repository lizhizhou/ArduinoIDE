<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="js/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="js/bootstrap.min.js"></script>
<title>Editor</title>
  <style type="text/css" media="screen">

    .ace_editor {
        position: relative !important;
        border: 1px solid lightgray;
        margin: 0;
        height: 600px;
        width: 80%;
    }

    .ace_editor.fullScreen {
        height: auto;
        width: auto;
        border: 0;
        margin: 0;
        position: fixed !important;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 10;
        background: white;
    }

    .fullScreen {
        overflow: hidden
    }

    .scrollmargin {
	height: inherit;
	text-align: left;
    }

</style>
</head>
<body>

<div id="IDE" class="">
<span onclick="run()" class="btn btn-success" title="run the program">
    run
</span>
<span onclick="stop()" class="btn btn-warning" title="stop the progrtam">
    stop
</span>
<a href="#myModal" role="button" class="btn btn-info" data-toggle="modal">API DOC</a>
<span onclick="reboot()" class="btn btn-danger" title="reboot the broad">
    reboot
</span>
<pre id="editor">
int main(int argn, char* argv[])
{
	printf("lophilo\n");
	return 0;
}
</pre>
<span onclick="ex1()" class="btn btn-info">
    ex1
</span>
<span onclick="ex2()" class="btn btn-info">
    ex2
</span>
<span onclick="ex3()" class="btn btn-info">
    ex3
</span>
<span onclick="ex4()" class="btn btn-info">
    ex4
</span>
<span onclick="ex5()" class="btn btn-info">
    ex5
</span>
<span onclick="ex6()" class="btn btn-info">
    ex6
</span>
<span onclick="ex7()" class="btn btn-info">
    ex7
</span>
</div>

<script src="./ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
	var dom = require("ace/lib/dom");
	
	//add command to all new editor instaces
	require("ace/commands/default_commands").commands.push({
		name: "Toggle Fullscreen",
		bindKey: "F11",
		exec: function(editor) {
			dom.toggleCssClass(document.body, "fullScreen")
			dom.toggleCssClass(editor.container, "fullScreen")
			editor.resize()
		}
	})
	
	// create first editor
	var editor = ace.edit("editor");
	editor.setTheme("ace/theme/tomorrow");
	editor.session.setMode("ace/mode/c_cpp");
	
	function run() {
		var code = editor.getValue();
		var xhr = new XMLHttpRequest();
		var post;	
		console.log("run");
		console.log(code);
		xhr.open("post","run",false);
		xhr.setRequestHeader( "Content-Type", "application/x-www-form-urlencoded")
		post = encodeURIComponent("text") + "=" + encodeURIComponent(code) + "&";
		xhr.send(post);
		console.log(xhr.status);	
	
	}
	
	function stop() {
		var xhr = new XMLHttpRequest();
		var post;	
		console.log("stop");
		xhr.open("post","stop",false);
		xhr.setRequestHeader( "Content-Type", "application/x-www-form-urlencoded")
		post = "";
		xhr.send(post);
		console.log(xhr.status);	
	
	}
	
	function reboot() {
		var xhr = new XMLHttpRequest();
		var post;	
		console.log("reboot");
		xhr.open("post","reboot",false);
		xhr.setRequestHeader( "Content-Type", "application/x-www-form-urlencoded")
		post = "";
		xhr.send(post);
		console.log(xhr.status);	
	
	}
	
	function ex1() {
		var code_ex1 = 
		"int main(int argn, char* argv[])\n" +
		"{\n" +
		"    led(0, 255,255,255);\n"+
		"    led(1, 255,0 ,255);\n" +
		"    led(2, 0 ,255,255);\n" +
		"    led(3, 255,255,0);\n"  +
		"    return 0;\n" +
		"}\n"
		editor.setValue(code_ex1);
		editor.clearSelection();
	}
	
	function ex2() {
		var code_ex1 = 
		"int main(int argn, char* argv[])\n" +
		"{\n" +
		"    led(0, 255, 0, 255);\n" +
		"    sleep(1);\n"            +
		"    led(0, 255, 255 ,0);\n" +
		"    sleep(1);\n"            +
		"    led(0, 0,255 , 255);\n" +
		"    return 0;\n" +
		"}\n"
		editor.setValue(code_ex1);
		editor.clearSelection();
	}
	
	function ex3() {
		var code_ex1 = 
		"int main(int argn, char* argv[])\n" +
		"{\n" +
		"    led(0, 255,255,255);\n"+
		"    led(1, 255,255 ,255);\n" +
		"    led(2, 0 ,255,255);\n" +
		"    led(3, 0,255,0);\n"  +
		"    return 0;\n" +
		"}\n"
		editor.setValue(code_ex1);
		editor.clearSelection();
	}
	
	function ex4() {
		var code_ex1 = 
		"int main(int argn, char* argv[])\n" +
		"{\n" +
		"    led(0, 255,255,255);\n"+
		"    led(1, 255,255 ,255);\n" +
		"    led(2, 0 ,255,255);\n" +
		"    led(3, 0,255,0);\n"  +
		"    return 0;\n" +
		"}\n"
		editor.setValue(code_ex1);
		editor.clearSelection();
	}
	
	function ex5() {
		var code_ex1 = 
		"int main(int argn, char* argv[])\n" +
		"{\n" +
		"    led(0, 255,255,255);\n"+
		"    led(1, 255,255 ,255);\n" +
		"    led(2, 0 ,255,255);\n" +
		"    led(3, 0,255,0);\n"  +
		"    return 0;\n" +
		"}\n"
		editor.setValue(code_ex1);
		editor.clearSelection();
	}
	
	function ex6() {
		var code_ex1 = 
		"int main(int argn, char* argv[])\n" +
		"{\n" +
		"    led(0, 255,255,255);\n"+
		"    led(1, 255,255 ,255);\n" +
		"    led(2, 0 ,255,255);\n" +
		"    led(3, 0,255,0);\n"  +
		"    return 0;\n" +
		"}\n"
		editor.setValue(code_ex1);
		editor.clearSelection();
	}

</script>

<!-- API reference doc-->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="ModalLabel">API Reference Document</h3>
    </div>
    <div class="modal-body">
      <div class="panel-group" id="accordion">
          <div class="panel panel-default">
            <div class="panel-heading">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
                <div class="alert alert-info" role="alert"><b>void led(int id, char r, char g, char b)</b></div>
                </a>
            </div>
            <div id="collapse1" class="panel-collapse collapse">
              <div class="panel-body">
                  <p>Functionality: Sleep for seconds</p>
                  <p>Argument: </p>
                  <p>id: The id of led can be 0-3</p>
                  <p>r: The red color of led</p>
                  <p>g: The greem color of led</p>
                  <p>b: The blue color of led</p>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">
              <div class="alert alert-info" role="alert"><b>unsigned int sleep (unsigned int seconds)</b></div>
              </a>
            </div>
            <div id="collapse2" class="panel-collapse collapse">
              <div class="panel-body">
                  <p>Functionality: Sleep for seconds</p>
                  <p>Argument: </p>
                  <p>seconds The seconds for sleeping</p>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">
                <div class="alert alert-info" role="alert"><b>int usleep (int useconds)</b></div>
                </a>
            </div>
            <div id="collapse3" class="panel-collapse collapse">
              <div class="panel-body">
                <p>Functionality: Sleep for micro seconds</p>
                <p>Argument: </p>
                <p>usecods: The micro seconds for sleeping</p>
              </div>
            </div>
          </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse4">
                <div class="alert alert-info" role="alert"><b>int printf (char * format, ...)</b></div>
                </a>
            </div>
            <div id="collapse4" class="panel-collapse collapse">
              <div class="panel-body">
                  <p>Functionality: print the string to the console</p>
                  <p>Argument: </p>
                  <p>format:output format string</p>
              </div>
            </div>
          </div>
    </div>
    <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">close</button>
    </div>
</div>

</body>
</html>
